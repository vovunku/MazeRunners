# MazeRunners
## UPD! Помогите, я Кухаренко Владимир, группа Б05-925
Итак, оно работает почти как надо. Тк я делал все это в агонии перед дедлайном - выглядит оно ужасно. Прошу помогите мне, все запуталось, дистанционка - ад(хочю в МФТИ). Если у вас есть возможность, я бы даже обсудил это по скайпу(любой аудиосвязи). Пожалуйста. А теперь к проблемам.
#### Глобальные проблемы. 
##### 1) Очень многие модули хотят уметь что-то вводить и выводить, поэтому приходится всем им передавать receiver и display. Это плохо, нет стройности. 
##### 2) Модуль работы с картами ущербен. Тут хотелось бы подсказки, как его структурировать
##### 3) Класс board выглядит непонятным и бесполезным. А также ломает логику со взаимодействием с игроком через команды
##### 4) Никаких приватных полей. Все лезут куда хотят и это очень сильно путает. Я не слишком хорошо понимаю, как это структурировать, тк если начать делать специальные интерфейсы взаимодествия, кажется, что все развалится
##### 5) Абсолютно непонятно, как корректно обрабатывать вход. Пока это сделано на уровне - считай, если корректно - отрабойтай, иначе упади. И все это через ифы(почти все, считывание команд для визитора мне немного нравится) ужасно
##### 6) Кажется, что все модули очень жестко сплетены между собой
Единственная часть, которая мне хоть немного нравится - это часть с visitorом и командами. В чем суть: я пытался сделать так, чтобы изменение игроков шло через команды, визитор бы обрабатывал эти команды и сообщал бы какую-то инфу в консоль. Причем это хорошо, тк игровой цикл превращается в обработку очереди команд игрока. Возникли проблемы. Например, хочется уметь говорить игроку, что ходить он больше не может, или сказать, что он удачно выстрелил(все это не меняет игрока, но в существующей логике должно проходить через визитора и попадать в лог). Сейчас глобально команды разделились на три типа - команды от клетки (двинуть застанить и тп)(они к слову хранят клетку в себе, и бессовестно в нее лезут), команды к доске(которая хранит игроков и клетки), пустые команды(которые ничего не делают, но сигнализируют визитору о чем то(не входит в общую логику)). Также большая проблема, что команд расплодилась целая туча, на каждый игровой сценарий.
Я правда очень много времени потратил на это чудо, и отчаялся уже что то переделать. Пожалуйста, помогите
## Базовая функциональность:
### 1. Ввод, вывод - receiver display
##### На данный момент реализована база, которая будет пополнятся другими функциями по мере необходимости(отдельный вопрос, правильно ли делать для каждого отдельного кейса свой вывод(напечатай меню, напечатай результат и т.д) и отдельные считывания) 
Реализация Bridge, с целью возможности дальнейшего расширения функционала. Думаю сделать так, чтобы эти модули передавали данные в каком-то определенном формате, но непонятно, насколько это правильно. Возможно имеет смысл сделать отдельный класс для данных, чтобы модули могли работать на удобных языках, но непонятно как это делать.
### 2. Фасад меню - menu_facade
##### Сделано, но очень некрасиво
Это фасад фасадов. Он будет предоставлять доступ к другим фасадам(и правильно инициализировать их соответственно) по желанию пользователя.
### 3. Игровой клиент - game_facade
##### Не реализовано
Реализация Facade, для предоставления ограниченной функциональности и реализации взаимодействия между пользователями их виртуальными игроками и игрой в целом. 
### 4. Игровое поле - Board
##### Реализовоно, будет дополняться
Реализация хранения ячеек и взаимодействия окружающей среды с совокупностью ячеек. 
### 5. Игрок - Player
##### Сейчас можно ходить, стрелять, заканчивать ход
Реализация выполнения последовательности комманд (например, ход каждого игрока делится на три части: взаимодествие с окружением, ход, завершение хода. При этом в любой момент игрок может захотеть увидеть подсказку по управлению, заглянуть в рюкзак и тд) с помощь Chain of Responsibility. Реализовано через Фабричный метод, чтобы игроки могли быть кастомными.
### 6. Клетки - Cell
##### Одна из тех частей, на которую не так отвратительно смотреть - реализовано
Реализация основных объектов в игре. Реализация Фабричного метода, т.к. базовая функциональность у всех клеток одинакова (посмотреть, взаимодействовать, сдвинуться, плюс содержание). Для передачи информации от клеток объектам используем Command(таким образом мы можем логировать действия игрока и разделить реализации клеток и игроков)
### 7. Команда - Command
##### Куча всего сделано, но будет еще больше команд
С помощью нее будет работать изменение игрока, в зависимости от его действий. Пока что видится, что для каждого вида клетки нужна своя команда, но это не очень хорошо. Исправить не получилось, команд целая уйма - это большая проблема.
### 8. Фасад добавления карт - map_editor, который за собой тянет map_manager
##### Реализовано, но очень спутанно
Сейчас оно умеет доставать карты из хранилища, и добавлять их туда же. При добавлении делает небольшую проверку на корректность бфсом, и, если что, выводит, из какой клетки до выхода дойти не удалось
### 9. Хранилище карт - пресловутый map_manager
##### Сделано
Отдельные файл(ы) и класс, который работает с этим хранилищем - проверяет, добавляет и удаляет карты.
### 10. Проверка валидности карты.
##### Сделано, лежит в map_editor
Пока что кажется, что нужно только BFS. Но нужна еще проверка корректности формата. А вот тут уже непонятно, как релизовывать 
### 11. Прокси
##### Не реализовано и непонятно, как его прикручивать к оставшейся части
Будет реализовано в виде декоратора. Основная его цель - проверка того, что данные полученные от модуля 1 - корректные. Можно будет задавать в каких ячейках полученного листа какие слова должны лежать. Возможно еще будет логическая проверка(по хорошему надо)
## Дополнения
### 1. Добавление доп. логики клеток
Реализация клеток, которые отправляют игрока на другое поле. Реализация выхода с помощью ключа
### 2. Генерация случайных карт

## Как пользоваться этим чудом?
Основная суть в том, что пока все команды жесткие, и нужно писать ровно так, как предлагается(те move LEFT, shoot UP). В основном меню пишем play/add map/exit. Для добавления карт нужен абсолютный путь, сохраняться они будут в maps. В игре в конце хода надо писать end. 
